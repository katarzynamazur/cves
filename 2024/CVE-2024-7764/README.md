# :mag_right: Background
Vanna is an MIT-licensed open-source Python RAG (Retrieval-Augmented Generation) framework for SQL generation and related functionality.

# :bug: Vulnerability Detail
At issue is when the `generate_sql` calls `extract_sql` with the LLM response. A basic regex process is followed to extract the SQL query from inside the LLM generated result. By including a semi-colon between a search data field and the attacker's command the `extract_sql` function will remove all LLM generated SQL, leaving only the attacker's command. As long as it passes the `is_sql_valid` function the query will be executed and the data returned.

# :bulb: Workaround
There is no known workaround for this vulnerability. It is essential to update to the latest version of Vanna to address the issue.

## :whale: How to test for the vulnerability using Docker?

```
docker compose -f docker-compose-cve-2024-7764.yaml up
```

