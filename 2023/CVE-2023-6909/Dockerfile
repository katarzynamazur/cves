# Use a base image with Python installed
FROM python:3.8-slim

LABEL maintainer="Katarzyna Mazur"
LABEL version="0.1"
LABEL description="CVE-2023-6909"

RUN apt-get update && apt-get install -y  

RUN pip install scikit-learn==1.2.2
# Install MLflow
RUN pip install mlflow==2.7.1

# Expose the port for MLflow UI
EXPOSE 5001

RUN export MLFLOW_TRACKING_URI=sqlite:///mlruns.db
ENV MLFLOW_TRACKING_URI=sqlite:///mlruns.db

CMD ["/bin/sh", "-c", "/usr/sbin/sshd && mlflow ui --host 0.0.0.0 --port 5001 --backend-store-uri sqlite:///mlruns.db"]

